<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Signup - S.A.N.G.A.M.</title>
    <meta name="description" content="Login or create an account for S.A.N.G.A.M. - Your spiritual journey companion">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'serif': ['Playfair Display', 'serif'],
                        'crimson': ['Crimson Text', 'serif'],
                        'cinzel': ['Cinzel', 'serif'],
                    },
                    colors: {
                        'saffron': {
                            50: '#fef9e7',
                            100: '#fdf2d1',
                            200: '#fbe5a3',
                            300: '#f8d675',
                            400: '#f5c947',
                            500: '#f2bc19',
                            600: '#d4a017',
                            700: '#a67c12',
                            800: '#78580d',
                            900: '#4a3408',
                        },
                        'indigo': {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                            950: '#1e1b4b',
                        },
                        'temple-gold': {
                            50: '#fffef7',
                            100: '#fffceb',
                            200: '#fff8d1',
                            300: '#fff2a7',
                            400: '#ffe96d',
                            500: '#ffdc33',
                            600: '#e6c52d',
                            700: '#cc9f00',
                            800: '#a67c00',
                            900: '#7a5800',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-in-out',
                        'slide-up': 'slideUp 1.2s ease-out',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulseGlow 3s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px) rotate(0deg)' },
                            '50%': { transform: 'translateY(-20px) rotate(3deg)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(251, 191, 36, 0.4)' },
                            '50%': { boxShadow: '0 0 40px rgba(251, 191, 36, 0.8)' },
                        }
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 0.5rem;
        }
        ::-webkit-scrollbar-track {
            background: linear-gradient(180deg, #fef9e7, #eef2ff);
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #f2bc19, #4338ca);
            border-radius: 0.25rem;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #d4a017, #312e81);
        }
        
        /* Enhanced transitions */
        * {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Enhanced hero background */
        .hero-bg {
            background: 
                radial-gradient(circle at 20% 80%, rgba(251,191,36,0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(79,70,229,0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(239,68,68,0.1) 0%, transparent 50%),
                linear-gradient(135deg, #1e1b4b 0%, #312e81 25%, #4338ca 50%, #7c2d12 75%, #451a03 100%);
            position: relative;
            overflow: hidden;
        }
        
        .hero-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" patternUnits="userSpaceOnUse" width="100" height="100"><circle cx="25" cy="25" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="%23ffffff" opacity="0.08"/><circle cx="50" cy="10" r="0.5" fill="%23ffffff" opacity="0.12"/><circle cx="90" cy="40" r="0.8" fill="%23ffffff" opacity="0.09"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
            pointer-events: none;
        }
        
        .floating-element {
            position: absolute;
            opacity: 0.1;
            pointer-events: none;
            color: #fbbf24;
            font-size: 2rem;
        }
        
        .floating-element:nth-child(1) { top: 10%; left: 10%; animation: float 8s ease-in-out infinite; }
        .floating-element:nth-child(2) { top: 20%; right: 15%; animation: float 12s ease-in-out infinite reverse; }
        .floating-element:nth-child(3) { bottom: 30%; left: 20%; animation: float 10s ease-in-out infinite; }
        .floating-element:nth-child(4) { bottom: 40%; right: 25%; animation: float 14s ease-in-out infinite reverse; }
        
        /* Card enhancements */
        .card {
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(31,41,55,0.2);
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-text-blue {
            background: linear-gradient(135deg, #6366f1, #4f46e5, #4338ca);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Enhanced buttons */
        .btn-glow {
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
        }
        
        .btn-glow:hover {
            box-shadow: 0 0 50px rgba(251, 191, 36, 0.6);
            transform: translateY(-2px) scale(1.05);
        }
        
        /* Enhanced typography */
        .hero-title {
            font-family: 'Cinzel', serif;
            font-weight: 700;
            text-shadow: 2px 4px 8px rgba(0,0,0,0.3);
            letter-spacing: 0.02em;
        }
        
        .hero-subtitle {
            font-family: 'Playfair Display', serif;
            font-weight: 500;
            text-shadow: 1px 2px 4px rgba(0,0,0,0.2);
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }
        
        /* Decorative elements */
        .decorative-line {
            background: linear-gradient(90deg, transparent, #fbbf24, transparent);
            height: 2px;
            border-radius: 1px;
        }
        
        /* Form enhancements */
        .form-input {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(99, 102, 241, 0.2);
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            border-color: #fbbf24;
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
            background: rgba(255, 255, 255, 0.95);
        }
        
        /* Responsive improvements */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 3rem;
                line-height: 1.1;
            }
        }
    </style>
</head>
<body class="font-sans bg-gradient-to-br from-indigo-50 via-white to-saffron-50 min-h-screen">
    <!-- Floating decorative elements -->
    <div class="floating-element">üïâÔ∏è</div>
    <div class="floating-element">üèõÔ∏è</div>
    <div class="floating-element">üåä</div>
    <div class="floating-element">üî±</div>
    
    <!-- Top Navbar -->
    <header class="fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-xl border-b border-saffron-200/50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center gap-4 group">
                <div class="relative">
                    <div class="absolute inset-0 bg-gradient-to-br from-temple-gold-500 to-saffron-600 rounded-full blur-md opacity-50 group-hover:opacity-75 transition-opacity"></div>
                    <div class="relative inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-temple-gold-500 to-saffron-600 shadow-lg overflow-hidden">
                        <img src="/static/assets2/logo.png" alt="S.A.N.G.A.M. Logo" class="w-12 h-12 object-cover p-1">
                    </div>
                </div>
                <div class="leading-tight">
                    <div class="text-lg font-cinzel font-bold gradient-text tracking-wider">S.A.N.G.A.M.</div>
                    <div class="text-xs text-indigo-600 font-medium">Your spiritual journey companion</div>
                </div>
            </a>
            <nav class="flex items-center gap-3">
                <a href="/" class="text-indigo-700 hover:text-saffron-600 font-medium px-4 py-2 rounded-xl hover:bg-gradient-to-r hover:from-saffron-50 hover:to-indigo-50 transition-all">
                    <span class="font-cinzel">Home</span>
                </a>
                <a href="/story" class="text-indigo-700 hover:text-saffron-600 font-medium px-4 py-2 rounded-xl hover:bg-gradient-to-r hover:from-saffron-50 hover:to-indigo-50 transition-all">
                    <span class="font-cinzel">Sacred Streams</span>
                </a>
            </nav>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="min-h-screen flex items-center justify-center px-4 pt-28 hero-bg">
        <div class="max-w-4xl mx-auto w-full">
            <!-- Login/Signup Container -->
            <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 md:p-12 border border-temple-gold-200">
                <!-- Logo and Title -->
                <div class="text-center mb-8">
                    <div class="relative inline-block mb-6">
                        <div class="absolute inset-0 bg-gradient-to-br from-indigo-600 to-saffron-600 rounded-full blur-lg opacity-50"></div>
                        <div class="relative inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-600 to-saffron-600 rounded-full shadow-xl overflow-hidden">
                            <img src="/static/assets2/logo.png" alt="S.A.N.G.A.M. Logo" class="w-14 h-14 object-cover p-1">
                        </div>
                    </div>
                    <h1 class="section-title text-4xl font-bold gradient-text-blue mb-2">S.A.N.G.A.M.</h1>
                    <p class="text-indigo-700 font-crimson text-lg">Your spiritual journey companion</p>
                </div>
                
                <!-- Tab Navigation -->
                <div class="flex justify-center mb-8">
                    <div class="bg-indigo-100 rounded-2xl p-1 flex">
                        <button id="login-tab" class="px-6 py-3 rounded-xl font-semibold transition-all duration-300 bg-white text-indigo-700 shadow-md">
                            Login
                        </button>
                        <button id="register-tab" class="px-6 py-3 rounded-xl font-semibold transition-all duration-300 text-indigo-600 hover:bg-indigo-50">
                            Sign Up
                        </button>
                    </div>
                </div>
                
                <!-- Login Form -->
                <div id="login-form-container" class="space-y-6">
                    <h2 class="section-title text-2xl font-bold text-indigo-900 text-center mb-6">Welcome Back</h2>
                    
                    <form id="login-form" class="space-y-6">
                        <div>
                            <label for="login-user-id" class="block text-sm font-semibold text-indigo-700 mb-3">User ID</label>
                            <input type="text" id="login-user-id" name="user_id" required
                                   class="form-input w-full px-5 py-4 rounded-xl"
                                   placeholder="Enter your User ID">
                        </div>
                        
                        <button type="submit" 
                                class="w-full bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white font-bold py-4 px-4 rounded-xl transition-all shadow-lg hover:shadow-xl btn-glow">
                            Login
                        </button>
                    </form>
                </div>
                
                <!-- Register Form (Hidden by default) -->
                <div id="register-form-container" class="space-y-6 hidden">
                    <h2 class="section-title text-2xl font-bold text-indigo-900 text-center mb-6">Create Account</h2>
                    
                    <form id="register-form" class="space-y-6">
                        <div>
                            <label for="register-username" class="block text-sm font-semibold text-indigo-700 mb-3">Username</label>
                            <input type="text" id="register-username" name="username" required
                                   class="form-input w-full px-5 py-4 rounded-xl"
                                   placeholder="Enter your username">
                        </div>
                        
                        <div>
                            <label for="register-email" class="block text-sm font-semibold text-indigo-700 mb-3">Email</label>
                            <input type="email" id="register-email" name="email" required
                                   class="form-input w-full px-5 py-4 rounded-xl"
                                   placeholder="Enter your email">
                        </div>
                        
                        <div>
                            <label for="register-mobile" class="block text-sm font-semibold text-indigo-700 mb-3">Mobile Number</label>
                            <input type="tel" id="register-mobile" name="mobile_number" required
                                   class="form-input w-full px-5 py-4 rounded-xl"
                                   placeholder="Enter your mobile number">
                        </div>
                        
                        <button type="submit" 
                                class="w-full bg-gradient-to-r from-saffron-600 to-saffron-700 hover:from-saffron-700 hover:to-saffron-800 text-white font-bold py-4 px-4 rounded-xl transition-all shadow-lg hover:shadow-xl">
                            Register
                        </button>
                    </form>
                </div>
                
                <!-- Back to Home -->
                <div class="text-center mt-8">
                    <a href="/" class="text-indigo-600 hover:text-indigo-700 font-medium">
                        ‚Üê Back to Home
                    </a>
                </div>
            </div>
        </div>
    </main>
    
    <!-- JavaScript -->
    <script>
        // Global variables
        let currentUser = null;
        
        // DOM elements
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginFormContainer = document.getElementById('login-form-container');
        const registerFormContainer = document.getElementById('register-form-container');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        // Tab switching functionality
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('bg-white', 'text-indigo-700', 'shadow-md');
            loginTab.classList.remove('text-indigo-600', 'hover:bg-indigo-50');
            registerTab.classList.remove('bg-white', 'text-indigo-700', 'shadow-md');
            registerTab.classList.add('text-indigo-600', 'hover:bg-indigo-50');
            
            loginFormContainer.classList.remove('hidden');
            registerFormContainer.classList.add('hidden');
        });
        
        registerTab.addEventListener('click', () => {
            registerTab.classList.add('bg-white', 'text-indigo-700', 'shadow-md');
            registerTab.classList.remove('text-indigo-600', 'hover:bg-indigo-50');
            loginTab.classList.remove('bg-white', 'text-indigo-700', 'shadow-md');
            loginTab.classList.add('text-indigo-600', 'hover:bg-indigo-50');
            
            registerFormContainer.classList.remove('hidden');
            loginFormContainer.classList.add('hidden');
        });
        
        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 px-6 py-4 rounded-xl shadow-lg transition-all duration-300 ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Login function
        async function login(userId) {
            try {
                if (userId && userId.trim() !== '') {
                    currentUser = {
                        user_id: userId,
                        username: userId,
                        email: 'user@example.com'
                    };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showNotification('Login successful! Redirecting...', 'success');
                    
                    // Redirect to main app after successful login
                    setTimeout(() => {
                        window.location.href = '/app';
                    }, 1500);
                } else {
                    showNotification('Please enter a valid User ID', 'error');
                }
            } catch (error) {
                showNotification('Login failed. Please try again.', 'error');
            }
        }
        
        // Register function
        async function register(userData) {
            try {
                if (userData.username && userData.email && userData.mobile_number) {
                    // Validate email format
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(userData.email)) {
                        showNotification('Please enter a valid email address', 'error');
                        return;
                    }
                    
                    // Validate mobile number (basic validation)
                    const mobileRegex = /^[0-9]{10}$/;
                    if (!mobileRegex.test(userData.mobile_number.replace(/\D/g, ''))) {
                        showNotification('Please enter a valid 10-digit mobile number', 'error');
                        return;
                    }
                    
                    currentUser = {
                        user_id: userData.username,
                        username: userData.username,
                        email: userData.email,
                        mobile_number: userData.mobile_number
                    };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showNotification('Registration successful! Redirecting...', 'success');
                    
                    // Redirect to main app after successful registration
                    setTimeout(() => {
                        window.location.href = '/app';
                    }, 1500);
                } else {
                    showNotification('Please fill in all required fields', 'error');
                }
            } catch (error) {
                showNotification('Registration failed. Please try again.', 'error');
            }
        }
        
        // Form event listeners
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userId = document.getElementById('login-user-id').value;
            if (userId) {
                login(userId);
            }
        });
        
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userData = {
                username: document.getElementById('register-username').value,
                email: document.getElementById('register-email').value,
                mobile_number: document.getElementById('register-mobile').value
            };
            if (userData.username && userData.email && userData.mobile_number) {
                register(userData);
            }
        });
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                showNotification('You are already logged in. Redirecting...', 'info');
                setTimeout(() => {
                    window.location.href = '/app';
                }, 1500);
            }
        });
    </script>
</body>
</html>
